<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Jacques van Helden, Bruno Contreras Moreira" />

<meta name="date" content="2022-12-20" />

<title>Installing RSAT on a Unix operating system</title>

<script src="installing_RSAT_procedure_files/header-attrs-2.18/header-attrs.js"></script>
<script src="installing_RSAT_procedure_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="installing_RSAT_procedure_files/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="installing_RSAT_procedure_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="installing_RSAT_procedure_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="installing_RSAT_procedure_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="installing_RSAT_procedure_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="installing_RSAT_procedure_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="installing_RSAT_procedure_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="installing_RSAT_procedure_files/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">Installing RSAT on a Unix operating
system</h1>
<h4 class="author">Jacques van Helden, Bruno Contreras Moreira</h4>
<h4 class="date">2022-12-20</h4>

</div>


<hr />
<div id="introduction" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>This tutorial explains how to install the complete <a
href="http://rsat.eu/">Regulatory Sequence Analysis Tools (RSAT)</a>
suite via GitHub or from a tarball archive in Linux or Mac OS X systems.
This RSAT distribution contains: (i) the <em>RSAT command line
tools</em>, (ii) the <em>web server</em> and (iii) the <em>web
services</em>.</p>
<hr />
</div>
<div id="requirements" class="section level1 tabset tabset-fade"
number="2">
<h1 class="tabset tabset-fade"><span
class="header-section-number">2</span> Requirements</h1>
<div id="linux" class="section level2 unlisted unnumbered">
<h2 class="unlisted unnumbered">Linux</h2>
<p><br></p>
<ol style="list-style-type: decimal">
<li><strong>Operating system</strong>. If your Linux operating system
(OS) is not Ubuntu some adaptation of the scripts used in the
installation step will be necessary (e.g. system libraries).</li>
<li><strong>Package manager</strong>. The <code>apt-get</code> package
manager should be already installed in the command line and it is
recommended to update to the latest version.</li>
<li><strong>Git and Git LFS</strong>. If you are installing the GitHub
repositories the <code>git</code> and <code>git-lfs</code> applications
should be available in the command line. You can install
<code>git</code> from <a href="https://git-scm.com/downloads">here</a>
and <code>git lfs</code> from <a
href="https://git-lfs.github.com/">here</a>.</li>
</ol>
<p><br></p>
<hr />
</div>
<div id="mac-os-x" class="section level2 unlisted unnumbered">
<h2 class="unlisted unnumbered">Mac OS X</h2>
<p><br></p>
<ol style="list-style-type: decimal">
<li><strong>Operating system</strong>. This RSAT installation protocol
is aimed at Mac OS X in Mojave (v10.14) and Catalina (v10.15). RSAT
installation in previous Mac OS X versions is feasible but a manual
installation of packages (e.g. <code>brew</code> packages) is needed and
it is beyond the scope of this tutorial.</li>
<li><strong>Xcode</strong>. The complete version of the <em>Xcode</em>
application should already be installed in your Mac OS X. You can
download and install <em>Xcode</em> from <a
href="https://developer.apple.com/download/">here</a>. Please be aware
that downloading <em>Xcode</em> versions for Mac OS X requires an Apple
Developer account.</li>
<li><strong>Package manager</strong>. The <code>brew</code> package
manager should be already installed in the command line and it is
recommended to update to the latest version. You can install
<code>brew</code> from <a href="https://brew.sh/">here</a>. At the
moment <code>brew</code> in RSAT is only supported for Mac OS X in
Mojave (v10.14) and Catalina (v10.15).</li>
<li><strong>Git and Git LFS</strong>. If you are installing the GitHub
repositories the <code>git</code> and <code>git-lfs</code> applications
should be available in the command line. You can install
<code>git</code> from <a href="https://git-scm.com/downloads">here</a>
and <code>git-lfs</code> from <a
href="https://git-lfs.github.com/">here</a>.</li>
</ol>
<p><br></p>
<hr />
</div>
</div>
<div id="overview-of-the-installation-steps" class="section level1"
number="3">
<h1><span class="header-section-number">3</span> Overview of the
installation steps</h1>
<ol style="list-style-type: decimal">
<li>Download an RSAT distribution archive.</li>
<li>Configure your RSAT installation.</li>
<li>Install your RSAT instance.</li>
<li>Test your RSAT installation: the (i) <em>RSAT command line
tools</em>, (ii) the <em>web server</em> and (iii) the <em>web
services</em> (SOAP/WSDL and REST).</li>
</ol>
<hr />
</div>
<div id="downloading-rsat" class="section level1 tabset tabset-fade"
number="4">
<h1 class="tabset tabset-fade"><span
class="header-section-number">4</span> Downloading RSAT</h1>
<p>You can clone the current RSAT development version from GitHub or
download the latest RSAT stable release as a tarball from any of the
RSAT servers.</p>
<div id="github_logo-cloning-github-repositories"
class="section level2 unlisted unnumbered">
<h2 class="unlisted unnumbered"><img src="images/GitHub-Mark-32px.png"
width="20" alt="github_logo" />   Cloning GitHub repositories</h2>
<p><br> The RSAT development version in GitHub is composed of four
different repositories: (i) <a
href="https://github.com/rsa-tools/rsat-code">rsat-code</a>, (ii) <a
href="https://github.com/rsa-tools/demo_files">demo_files</a>, (iii) <a
href="https://github.com/rsa-tools/motif_databases">motif_databases</a>
and (iv) <a
href="https://github.com/rsa-tools/sample_outputs">sample_outputs</a>.
All of these need to be cloned and installed for RSAT complete function.
To clone these repositories, the <a
href="https://git-scm.com/downloads">git</a> and <a
href="https://git-lfs.github.com/">git lfs</a> applications should be
available in the command line for both Linux and Mac OS X systems.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Choose a directory to install RSAT</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">INSTALL_ROOT</span><span class="op">=</span>~/packages</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">${INSTALL_ROOT}</span>/</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">## Make a clone of the different RSAT packages</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span>  <span class="va">${INSTALL_ROOT}</span>/</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/rsa-tools/rsat-code.git</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/rsa-tools/demo_files.git</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/rsa-tools/motif_databases.git</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/rsa-tools/sample_outputs.git</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">## Create soft links to the data repositories</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> rsat-code rsat</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> rsat/public_html</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-s</span> ../../demo_files</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-s</span> ../../sample_outputs</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-s</span> ../../motif_databases</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span>  <span class="va">${INSTALL_ROOT}</span>/rsat</span></code></pre></div>
<hr />
</div>
<div id="tar_logo-dowloading-a-tarball-archive"
class="section level2 unlisted unnumbered">
<h2 class="unlisted unnumbered"><img src="images/box-seam.svg"
width="20" alt="tar_logo" />   Dowloading a tarball archive</h2>
<p><br></p>
<ol style="list-style-type: decimal">
<li><p>Go to the <a href="http://rsat.eu/">RSAT portal</a></p></li>
<li><p>Select any server.</p></li>
<li><p>In the left-sided menu and the <strong>Help&amp;Contact</strong>
section, click on the <strong>Download</strong> link.</p></li>
<li><p>Fill in your name and coordinates and access to the download
site.</p>
<p>You now have access to the download page containing the links to:</p>
<ul>
<li>the latest stable release named <code>rsat_20XX-XX-XX.tar.gz</code>
(XX-XX-XX must be replaced by the release date).</li>
<li>the previous release archives available in the folder
<code>previous_versions</code>.</li>
</ul></li>
<li><p>Download the tar archive named
<code>rsat_20XX-XX-XX.tar.gz</code> where <code>XX-XX-XX</code> is the
latest release date and put it in your chosen directory.</p></li>
<li><p>Uncompress the archive. This will create a directory named
<code>rsat</code> where we will continue the install procedure.</p></li>
</ol>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Set the RSAT release version (same as from the tarball)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">RELEASE</span><span class="op">=</span>20XX.XX.XX </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">## e.g. export RELEASE=2021.01.13</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">## By default we install the package a folder named packages. </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">## This should be adapted according to your local setup. </span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">INSTALL_ROOT</span><span class="op">=</span>~/packages</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">${INSTALL_ROOT}</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">## Download the archives from the RSAT distribution site</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">DOWNLOAD_BASE</span><span class="op">=</span>http://pedagogix-tagc.univ-mrs.fr/download_rsat</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> PKG <span class="kw">in</span> core web motifdb</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="va">ARCHIVE</span><span class="op">=</span>rsat-<span class="va">${PKG}</span>_<span class="va">${RELEASE}</span>.tar.gz</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="va">DOWNLOAD_URL</span><span class="op">=</span><span class="va">${DOWNLOAD_BASE}</span>/<span class="va">${ARCHIVE}</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="bu">echo</span> <span class="st">&quot;Downloading rsat-</span><span class="va">${PKG}</span><span class="st"> from URL   </span><span class="va">${DOWNLOAD_URL}</span><span class="st">&quot;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">wget</span> <span class="at">--no-clobber</span> <span class="va">${DOWNLOAD_URL}</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar</span> <span class="at">-C</span> <span class="va">${INSTALL_ROOT}</span>/ <span class="at">-xpvzf</span> <span class="va">${ARCHIVE}</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${INSTALL_ROOT}</span>/rsat</span></code></pre></div>
<hr />
</div>
</div>
<div id="configuring-rsat" class="section level1 tabset tabset-fade"
number="5">
<h1 class="tabset tabset-fade"><span
class="header-section-number">5</span> Configuring RSAT</h1>
<p>We will first specify an environment variable named <code>RSAT</code>
with the path to the <code>rsat</code> directory.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Set the main RSAT directory path </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">RSAT</span><span class="op">=</span><span class="va">${INSTALL_ROOT}</span>/rsat</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;RSAT </span><span class="va">${RSAT}</span><span class="st">&quot;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Go to the main rsat directory</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${RSAT}</span></span></code></pre></div>
<div id="linux-1"
class="section level2 unlisted unnumbered tabset tabset-fade">
<h2 class="unlisted unnumbered tabset tabset-fade">Linux</h2>
<div id="semi-automatic-configuration"
class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered">Semi-automatic configuration</h3>
<p><br> A semi-automatic configuration of the RSAT installation can be
done by providing some minimal parameters such as: (i) an IP address for
the web server and services, (ii) a site name for the RSAT instance and
(iii) the RSAT main directory. We will customize the first two
parameters below, set the RSAT main directory and then run the
configuration script.</p>
<p><br></p>
<div id="setting-the-ip-address-for-your-web-server"
class="section level5 unlisted unnumbered tabset tabset-fade">
<h5 class="unlisted unnumbered tabset tabset-fade">5.1 Setting the IP
address for your web server</h5>
<div id="laptop_logo-personal-computer"
class="section level6 unlisted unnumbered">
<h6 class="unlisted unnumbered"><img src="images/laptop.svg" width="18"
alt="laptop_logo" />   Personal computer</h6>
<p>If you install RSAT on a personal computer (e.g. a laptop) and intend
to use it only for this machine, you can configure it with the local
network’s IP.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Configure RSAT to be used internally only</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MY_IP</span><span class="op">=</span><span class="st">&quot;127.0.0.1&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Check that the IP site of your machine has been specified</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;MY_IP </span><span class="va">${MY_IP}</span><span class="st">&quot;</span></span></code></pre></div>
</div>
<div id="server_logo-server" class="section level6 unlisted unnumbered">
<h6 class="unlisted unnumbered"><img src="images/server.svg" width="18"
alt="server_logo" />   Server</h6>
<p>If you install RSAT on a server or if you intend to provide service
to external users, please replace <code>XXX.XXX.XXX.XXX</code> below by
the actual IP address of your server (e.g. for Virtualbox Virtual
Machines, we set the IP to 192.168.56.101). The <code>ip</code> util
should be already available in the command line.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Get your IP address</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ip</span> <span class="at">-c</span> a <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;inet &#39;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Configure RSAT to be used for external service</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MY_IP</span><span class="op">=</span><span class="st">&quot;XXX.XXX.XXX.XXX&quot;</span> <span class="co">## e.g. export MY_IP=&quot;192.168.56.101&quot;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Check that the IP site of your machine has been specified</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;MY_IP </span><span class="va">${MY_IP}</span><span class="st">&quot;</span></span></code></pre></div>
</div>
</div>
<div id="choose-a-site-name-for-your-rsat-instance"
class="section level5 unlisted unnumbered">
<h5 class="unlisted unnumbered">5.2 Choose a site name for your RSAT
instance</h5>
<p>You can choose an arbitrary name for your RSAT instance. For this
tutorial, we will call it <code>my_rsat</code>, but you are welcome to
use another site name.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose your RSAT site name</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">RSAT_SITE</span><span class="op">=</span>my_rsat</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Check that you have specified a site name</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;RSAT_SITE </span><span class="va">${RSAT_SITE}</span><span class="st">&quot;</span></span></code></pre></div>
</div>
<div id="configuration-of-rsat-parameters"
class="section level5 unlisted unnumbered">
<h5 class="unlisted unnumbered">5.3 Configuration of RSAT
parameters</h5>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Semi-auto configuration for VirtualBox VM</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">## (adapt IP address if required)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">perl</span> perl-scripts/configure_rsat.pl <span class="at">-auto</span>  <span class="dt">\</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  rsat=<span class="va">${RSAT}</span> <span class="dt">\</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  rsat_site=<span class="va">${RSAT_SITE}</span> <span class="dt">\</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  rsat_www=http://<span class="va">${MY_IP}</span>/rsat/ <span class="dt">\</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  rsat_ws=http://<span class="va">${MY_IP}</span>/rsat/ <span class="dt">\</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  package_manager=<span class="st">&quot;apt-get&quot;</span> <span class="dt">\</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  ucsc_tools=1 <span class="dt">\</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  ensembl_tools=1</span></code></pre></div>
<p>You can add some additional options to the previous command,
e.g. enter your mail address as server admin, activate some specific
tools that are disabled by default.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="va">rsat_server_admin</span><span class="op">=</span>your.mail@your.mail.server</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="va">variation_tools</span><span class="op">=</span>1</span></code></pre></div>
<hr />
</div>
</div>
<div id="advanced-configuration"
class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered">Advanced configuration</h3>
<p><br> To configure all options, you can run the script
<code>configure_rsat.pl</code> as below. An interactive prompt will open
and you will be able to refine all the configuration options by choosing
custom parameter for your RSAT instance (e.g. the email of the local
admin, the organism group, etc. ).</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Configure all the options</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">perl</span> perl-scripts/configure_rsat.pl</span></code></pre></div>
<p>If you want to secure your RSAT Web server by providing HTTPS
connections, the following steps should work on Ubuntu or Debian
systems:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install snapd</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> snap install core</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> snap refresh core</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> snap install <span class="at">--classic</span> certbot</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /snap/bin/certbot /usr/bin/certbot</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># installation of certificate for Apache </span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> certbot <span class="at">--apache</span> <span class="at">-d</span> instance.name</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># certificate renewal </span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> certbot renew</span></code></pre></div>
<hr />
</div>
</div>
<div id="mac-os-x-1"
class="section level2 unlisted unnumbered tabset tabset-fade">
<h2 class="unlisted unnumbered tabset tabset-fade">Mac OS X</h2>
<div id="semi-automatic-configuration-1"
class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered">Semi-automatic configuration</h3>
<p><br> A semi-automatic configuration of the RSAT installation can be
done by providing some minimal parameters such as: (i) an IP address for
the web server and services, (ii) a site name for the RSAT instance and
(iii) the RSAT main directory. We will customize the first two
parameters below, set the RSAT main directory and then run the
configuration script.</p>
<p><br></p>
<div id="setting-the-ip-address-for-your-web-server-1"
class="section level5 unlisted unnumbered tabset tabset-fade">
<h5 class="unlisted unnumbered tabset tabset-fade">5.1 Setting the IP
address for your web server</h5>
<div id="personal-computer" class="section level6 unlisted unnumbered">
<h6 class="unlisted unnumbered">Personal computer</h6>
<p>If you install RSAT on a personal computer (e.g. a laptop) and intend
to use it only for this machine, you can configure it with the local
network’s IP.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Configure RSAT to be used internally only</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MY_IP</span><span class="op">=</span><span class="st">&quot;127.0.0.1&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Check that the IP site of your machine has been specified</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;MY_IP </span><span class="va">${MY_IP}</span><span class="st">&quot;</span></span></code></pre></div>
</div>
<div id="server_logo-server-1"
class="section level6 unlisted unnumbered">
<h6 class="unlisted unnumbered"><img src="images/server.svg" width="18"
alt="server_logo" />   Server</h6>
<p>If you install RSAT on a server or if you intend to provide service
to external users, please replace <code>XXX.XXX.XXX.XXX</code> below by
the actual IP address of your server (e.g. for Virtualbox Virtual
Machines, we set the IP to 192.168.56.101). The <code>ifconfig</code>
util should be already available in the command line.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Get your IP address</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ifconfig</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;inet &quot;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-Fv</span> 127.0.0.1 <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $2}&#39;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Configure RSAT to be used for external service</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MY_IP</span><span class="op">=</span><span class="st">&quot;XXX.XXX.XXX.XXX&quot;</span> <span class="co">## e.g. export MY_IP=&quot;192.168.56.101&quot;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Check that the IP site of your machine has been specified</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;MY_IP </span><span class="va">${MY_IP}</span><span class="st">&quot;</span></span></code></pre></div>
</div>
</div>
<div id="choose-a-site-name-for-your-rsat-instance-1"
class="section level5 unlisted unnumbered">
<h5 class="unlisted unnumbered">5.2 Choose a site name for your RSAT
instance</h5>
<p>You can choose an arbitrary name for your RSAT instance. For this
tutorial, we will call it <code>my_rsat</code>, but you are welcome to
use another site name.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose your RSAT site name</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">RSAT_SITE</span><span class="op">=</span>my_rsat</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Check that you have specified a site name</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;RSAT_SITE </span><span class="va">${RSAT_SITE}</span><span class="st">&quot;</span></span></code></pre></div>
</div>
<div id="configuration-of-rsat-parameters-1"
class="section level5 unlisted unnumbered">
<h5 class="unlisted unnumbered">5.3 Configuration of RSAT
parameters</h5>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Set the main RSAT directory path </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">RSAT</span><span class="op">=</span><span class="va">${INSTALL_ROOT}</span>/rsat</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;RSAT </span><span class="va">${RSAT}</span><span class="st">&quot;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Go to the main rsat directory</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${RSAT}</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">## Semi-auto configuration for VirtualBox VM</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">## (adapt IP address if required)</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="fu">perl</span> perl-scripts/configure_rsat.pl <span class="at">-auto</span>  <span class="dt">\</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  rsat=<span class="va">${RSAT}</span> <span class="dt">\</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  rsat_site=<span class="va">${RSAT_SITE}</span> <span class="dt">\</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  rsat_www=http://<span class="va">${MY_IP}</span>/rsat/ <span class="dt">\</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  rsat_ws=http://<span class="va">${MY_IP}</span>/rsat/ <span class="dt">\</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  package_manager=<span class="st">&quot;brew&quot;</span> <span class="dt">\</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  ucsc_tools=1 <span class="dt">\</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  ensembl_tools=1</span></code></pre></div>
<p>You can add some additional options to the previous command,
e.g. enter your mail address as server admin, activate some specific
tools that are disabled by default.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="va">rsat_server_admin</span><span class="op">=</span>your.mail@your.mail.server</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="va">variation_tools</span><span class="op">=</span>1</span></code></pre></div>
<hr />
</div>
</div>
<div id="advanced-configuration-1"
class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered">Advanced configuration</h3>
<p><br> To configure all options, you can run the script
<code>configure_rsat.pl</code> as below. An interactive prompt will open
and you will be able to refine all the configuration options by choosing
custom parameter for your RSAT instance (e.g. the email of the local
admin, the organism group, etc. ).</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Set the main RSAT directory path </span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">RSAT</span><span class="op">=</span><span class="va">${INSTALL_ROOT}</span>/rsat</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">## Check that RSAT directory path has been specified</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;RSAT </span><span class="va">${RSAT}</span><span class="st">&quot;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">## Go to the main rsat directory</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${RSAT}</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Configure all the options</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="fu">perl</span> perl-scripts/configure_rsat.pl</span></code></pre></div>
<!--

## For the IFB cloud

RSAT has been ported on the cloud of the [**Institut Français de Bioinformatique**](http://www.france-bioinformatique.fr) (**IFB**). The tools are available as an appliance which enables each user to automatically start an RSAT server, that can be used in a terminal, via a Web interface, or invoked remotely as Web services. 


Since the IP address is allocated dynamically during at the start of the instance booting, we use an automatic configuration. 


```bash
perl perl-scripts/configure_rsat.pl -auto  \
  rsat_site=rsatvm-ifb-2018-05 \
  RSAT=${INSTALL_ROOT}/rsat \
  rsat_www=auto \
  rsat_ws=auto \
  phylo_tools=0 \
  compara_tools=0 \
  variations_tools=0 \
  ucsc_tools=0 \
  ensembl_tools=0 \
  SUDO=sudo
  
chmod 755 /root # required for apache user to access the packages
```
-->
<hr />
</div>
</div>
</div>
<div id="installing-rsat" class="section level1 tabset tabset-fade"
number="6">
<h1 class="tabset tabset-fade"><span
class="header-section-number">6</span> Installing RSAT</h1>
<div id="linux-2" class="section level2 unlisted unnumbered">
<h2 class="unlisted unnumbered">Linux</h2>
<p>Before running the installation, it might be worth updating the Linux
distribution (<code>apt-get update</code>) in order to get the latest
versions of the basic packages. If your Linux OS is not Ubuntu some
adaptation of the scripts used in this step will be necessary
(e.g. system libraries).</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">## </span><span class="al">NOTE</span><span class="co">: you must now move to the $INSTALL_ROOT directory before becoming admin</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${INSTALL_ROOT}</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">## This requires admin privileges</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> bash</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">## Go to the RSAT directory</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">INSTALL_ROOT</span><span class="op">=</span><span class="kw">`</span><span class="bu">pwd</span><span class="kw">`</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${INSTALL_ROOT}</span>/rsat</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">## Check who you are  (should be root)</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="fu">whoami</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co">## Define your operating system</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MY_OS</span><span class="op">=</span>ubuntu</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co">## Read config and run bash installation scripts</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> RSAT_config.bashrc <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/01_<span class="va">${MY_OS}</span>_packages.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/02_python_packages.bash  <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/03_install_rsat.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/04_perl_packages.bash  <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/06_install_organisms.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/07_R-and-packages.bash  <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/08_apache_config.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/09_rsat_ws.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/10_clean_unnecessary_files.bash</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="co">## </span><span class="al">NOTE</span><span class="co">: the following command should be adapted to your case.</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a><span class="co">## Restore the *login* and *group* of the user owing the $RSAT folder.</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="fu">chown</span> <span class="at">-R</span> MyLogin:MyGroup <span class="va">$RSAT</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="co">## Exit sudo session</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="co">## Check who you are (should be back to normal user identity)</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="fu">whoami</span> <span class="co">## This should give *YourUserName*</span></span></code></pre></div>
<hr />
</div>
<div id="mac-os-x-2" class="section level2 unlisted unnumbered">
<h2 class="unlisted unnumbered">Mac OS X</h2>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Go to the main rsat directory</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${RSAT}</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">## Read config file and run bash installation scripts for &#39;brew&#39; packages</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> RSAT_config.bashrc <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/01_macosx_packages.bash </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">## </span><span class="al">NOTE</span><span class="co">: you must now move to the $INSTALL_ROOT directory before becoming admin</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${INSTALL_ROOT}</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">## This requires admin privileges</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> bash</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">## Go to the RSAT directory</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">INSTALL_ROOT</span><span class="op">=</span><span class="kw">`</span><span class="bu">pwd</span><span class="kw">`</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">RSAT</span><span class="op">=</span><span class="va">${INSTALL_ROOT}</span>/rsat</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${RSAT}</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co">## Check who you are  (should be &#39;root&#39;)</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="fu">whoami</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co">## Read config file and run the remaining bash installation scripts</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> RSAT_config.bashrc <span class="kw">&amp;&amp;</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/02_python_packages.bash  <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/03_install_rsat.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/04_perl_packages.bash  <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/06_install_organisms.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/07_R-and-packages.bash  <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/08_apache_config.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/09_rsat_ws.bash <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> installer/10_clean_unnecessary_files.bash</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a><span class="co">## </span><span class="al">NOTE</span><span class="co">: the following command should be adapted to your case.</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a><span class="co">## Restore the *login* and *group* of the user owing the $RSAT folder.</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a><span class="fu">chown</span> <span class="at">-R</span> MyLogin:MyGroup <span class="va">$RSAT</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a><span class="co">## Exit sudo session</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a><span class="co">## Check who you are (should be back to normal user identity)</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a><span class="fu">whoami</span> <span class="co">## This should give *YourUserName*</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="managing-a-rsat-web-server" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Managing a RSAT Web
server</h1>
<!-- adapted from https://github.com/rsa-tools/rsat-code/blob/master/doc/manuals/rsat_web_server.tex -->
<div id="access-logs" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Access logs</h2>
<p>Each time a script is executed via the RSAT server, some basic
information is stored in a log file. This information is minimal: it is
restricted to the time, name of the script executed, and the IP address
of the client machine. We do not want to store any additional
information (e.g. selected organism, lists of genes), for obvious
confidentiality reasons.</p>
<p>The log files are saved in the directory <em>${RSAT}/logs</em>. There
is one file per month.</p>
</div>
<div id="cleaning-the-temporary-directory" class="section level2"
number="7.2">
<h2><span class="header-section-number">7.2</span> Cleaning the
temporary directory</h2>
<p>The Web server stores result files in a temporary directory
<em>${RSAT}/public_html/tmp</em>. These files should remain 3 days on
the server, in order to allow users to consult their results.</p>
<div id="manual-cleaning" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Manual
cleaning</h3>
<p>The RSAT package includes a make script to clean old files in the
temporary directory.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$RSAT</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="at">-f</span> makefiles/server.mk clean_tmp</span></code></pre></div>
<p>This command cleans all the files older than 3 days. You can clean
more recent files by modifying the variable CLEAN_DATE.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="at">-f</span> makefiles/server.mk clean_tmp  CLEAN_DATE=1</span></code></pre></div>
<p>This will clean all files older than 1 day.</p>
</div>
<div id="automatic-cleaning" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Automatic
cleaning</h3>
<p>The automatic management of the temporary directory can be greatly
facilitated the <em>crontab</em> command. For this, you need to add a
command to a <em>crontab</em> configuration file, preferably from a
superuser.</p>
<ul>
<li><p>Start editing the crontab; this will open your <em>crontab</em>
file with a text editor available in your system.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crontab</span> <span class="at">-e</span></span></code></pre></div></li>
<li><p>Add the following line to execute the clean script daily at
midnight:</p>
<pre><code>0 0 * * * make -f ${RSAT}/makefiles/server.mk clean_tmp</code></pre></li>
<li><p>Save the modified crontab file and close your text
editor.</p></li>
</ul>
<hr />
</div>
</div>
</div>
<div id="testing-your-rsat-instance" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Testing your RSAT
instance</h1>
<div id="testing-the-command-lines" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Testing the command
lines</h2>
<p>The script <code>makefile/install_tests.mk</code> runs a series of
tests for different components of the <em>RSAT</em> suite. Each test
result is stored in a separate file in the test directory
(<code>./install_tests</code> by default). Output file names are printed
out after each test.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Load the RSAT configuration</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">${INSTALL_ROOT}</span>/rsat</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> RSAT_config.bashrc</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$RSAT</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="at">-f</span> makefiles/install_tests.mk all</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">## Check the results</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-ltr</span> install_tests</span></code></pre></div>
<hr />
</div>
<div id="testing-the-web-server" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Testing the Web
server</h2>
<p>The RSAT Web site can be found at your host IP address followed by
rsat: <a href="http://%5Bmy.computer.ip.address%5D/rsat/"
class="uri">http://[my.computer.ip.address]/rsat/</a></p>
<p>e.g. for VirtualBox VM: <a href="http://192.168.56.101/rsat/"
class="uri">http://192.168.56.101/rsat/</a></p>
<p>The web site can be tested by selecting any supported tool, clicking
on the demo button and checking the result.</p>
<p>We usually use the following tools as diagnostic of the proper
functioning of a server.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Supported organisms</strong> to check if the default
organisms have been installed.</p></li>
<li><p><strong>Fetch sequences from UCSC</strong>:</p>
<ul>
<li>is the list of organisms is correctly displayed (obtained
dynamically from UCSC) ?</li>
<li>run the demo: do you obtain fasta sequences ?</li>
</ul></li>
<li><p><strong>retrieven Ensembl seq</strong>:</p>
<ul>
<li>is the list of organisms is correctly displayed (obtained
dynamically from Ensembl) ?</li>
<li>run the demo 1 (single organism): do you obtain fasta sequences
?</li>
</ul></li>
<li><p><strong>convert-matrix</strong>: check that logos are properly
generated</p></li>
<li><p><strong>gene-info</strong> to <strong>feature-map</strong>: check
that the genes are well returned with gene-info, then successively send
the results throught the following tools:</p>
<ul>
<li><p><strong>gene-info</strong> demo -&gt; gene list. Check if you
obtain a table with genes. If so, under <em>Next steps</em>, click the
button <em>retrieve sequences</em>.</p></li>
<li><p><strong>retrieve sequences</strong>. Click “Run Analysis” then
“GO”. In the result, check the fasta file. Next step:
<em>oligo-analysis</em>.</p></li>
<li><p><strong>oligo-analysis</strong>. In the result, check the k-mers
(oligos) then the matrices and the logos. In the Next step box, end the
result to <em>string-based pattern matching</em>.</p></li>
<li><p><strong>dna-pattern</strong></p></li>
<li><p><strong>feature-map</strong> check that the png figure is
properly generated and displayed.</p></li>
</ul></li>
</ol>
<p>At the end of this process the results should look like the figure
below.</p>
<div class="figure" style="text-align: center">
<img src="images/feature-map_web_result.png" alt="**Feature-map result** at the end of the pipeline from *gene-info* to *feature-map*." width="60%" />
<p class="caption">
<strong>Feature-map result</strong> at the end of the pipeline from
<em>gene-info</em> to <em>feature-map</em>.
</p>
</div>
<div id="troubleshooting-403-forbidden-error" class="section level3"
number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Troubleshooting:
403 Forbidden Error</h3>
<p>If a 403 Forbidden Error appears when you test your local RSAT
website such as with <code>http://localhost/rsat/</code>, follow the
next steps:</p>
<ol style="list-style-type: decimal">
<li>First, check that the paths to your RSAT instance are right in the
RSAT web server configuration files at your
<code>/etc/apache2/sites-enabled</code> directory.</li>
</ol>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /etc/apache2/sites-enabled</span></code></pre></div>
<p>As an example, in config file <code>RSAT_config.conf</code>, the
directory paths to your RSAT in the next chunk should look similar to
this (as signaled by arrows):</p>
<pre><code>################################################################
## Define the alias.
##
## The RSAT server should be visible when adding this alias after the
## Web server URL.
Alias /rsat /home/user/packages/rsat/public_html/                 ## &lt;-----

################################################################
## Make sure R libs are accessible to the apache user.
SetEnv R_LIBS_USER /home/user/packages/rsat/R-scripts/Rpackages/  ## &lt;-----

################################################################
## Configuration for Apache 2.4

## Enable CGI scripts in the public_html directory
&lt;Directory &quot;/home/user/packages/rsat/public_html/&quot;&gt;                ## &lt;-----
    AllowOverride all
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch +Indexes
    Require all granted
&lt;/Directory&gt;

&lt;Directory &quot;/home/user/packages/rsat/public_html/data/&quot;&gt;           ## &lt;-----
    AllowOverride all
    Options +Indexes +SymLinksIfOwnerMatch
    Require all granted
&lt;/Directory&gt;

&lt;Directory &quot;/home/user/packages/rsat/public_html/motif_databases/&quot;&gt;  ## &lt;-----
    AllowOverride all
    Options +Indexes +SymLinksIfOwnerMatch
    Require all granted
&lt;/Directory&gt;

&lt;Directory &quot;/home/user/packages/rsat/public_html/tutorials/&quot;&gt;     ## &lt;-----
    AllowOverride all
    Options +Indexes +SymLinksIfOwnerMatch
    Require all granted
&lt;/Directory&gt;</code></pre>
<p>If that’s not the case, change them.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">## check the RSAT path you defined before</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$RSAT</span> <span class="co"># copy the dir</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">## You need sudo permissions</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> su</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> RSAT_config.conf</span></code></pre></div>
<p>Replace the paths (such as <code>/home/user/packages/rsat/</code> in
the example) for the <code>dir/to/rsat</code> you copied earlier, making
sure to keep the RSAT inner directories in the paths (such as
<code>public_html/tutorials/</code>) unchanged.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CTRL + O to save</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># CTRL + X to exit</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> RSAT_config_default_apache2.2.conf</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">## change paths</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># CTRL + O to save</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># CTRL + X to exit</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><p>Repeat process for RSAT config files at
<code>/etc/apache2/sites-available</code>.</p></li>
<li><p>To make sure <code>.cgi</code> scripts work:</p></li>
</ol>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">a2enmod</span> cgid</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Restart apache:</li>
</ol>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">service</span> apache2 restart</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Give permission in your RSAT instance</li>
</ol>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$INSTALL_ROOT</span>/..</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> 777 <span class="at">-R</span> <span class="va">$INSTALL_ROOT</span></span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Your RSAT web server should work now.</li>
</ol>
<hr />
<p><br />
</p>
</div>
</div>
<div id="testing-the-web-services" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Testing the Web
services</h2>
<div id="soapwsdl-interface" class="section level3" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> SOAP/WSDL
interface</h3>
</div>
<div id="rest-interface" class="section level3 tabset" number="8.3.2">
<h3 class="tabset"><span class="header-section-number">8.3.2</span> REST
interface</h3>
<p><a href="http://rsat-tagc.univ-mrs.fr/rest/">Click here for a web
version of REST</a>.</p>
<p>As an example, we are running <code>matrix-scan</code>’s <a
href="http://embnet.ccg.unam.mx/rsat/matrix-scan_form.cgi">DEMO
1</a>:</p>
<blockquote>
<p>In this demonstration, we will analyse the promoter of Drosophila
melanogaster even-skipped gene (eve). We will scan the 5500 bp sequence
upstream the transcription start site with matrices representing the
binding specificity of 12 transcription factors known to regulate eve.
These matrices were built from binding sites annotated in the ORegAnno
database by Jean-Valery Turatsinze.</p>
</blockquote>
<div id="script" class="section level4" number="8.3.2.1">
<h4><span class="header-section-number">8.3.2.1</span>
<strong>Script</strong></h4>
<p>This is an example for using REST-API scripts which are available in
your RSAT instance in dir
<code>$RSAT/public_html/web_services/REST-API</code>. Demo data for
these scripts is available at
<code>$RSAT/public_html/web_services/REST-API/restclientexamples/demo-data_4rest-api.py</code>.</p>
<p><br />
</p>
<ol style="list-style-type: decimal">
<li><p>Open file
<code>$RSAT/public_html/web_services/REST-API/matrix-scan.py</code> in
the text editor of your choosing.</p></li>
<li><p>Copy the script in a separate file and name it (for example:
<code>~/test_matrix-scan.py</code>).</p></li>
<li><p>Edit the <code>data{}</code> dictionary to change the arguments
with which to run <code>matrix-scan</code>. We are changing the
arguments to run the <a
href="http://embnet.ccg.unam.mx/rsat/matrix-scan_form.cgi">DEMO 1</a>
mentioned above.</p></li>
</ol>
<p>Edit the following arguments as follows, read the comments for
information regarding them:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fasta sequences where we are going to look for sites (Drosophila melanogaster 5kbps upstream from eve gene)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;i_string&quot;</span> : <span class="st">&quot;http://rsat-tagc.univ-mrs.fr/rsat/demo_files/Dmelanogaster_eve_up5000.fasta&quot;</span>, <span class="co">##Input string specifying the query. The value can be the query content, the URL of a file available on some Web server, the internal path of the result file returned by another tool of this RSAT server (piping for workflows).</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;i_string_type&quot;</span> : <span class="st">&quot;url&quot;</span>, <span class="co">##Type of information provided by the input string. Supported values: url: URL (Web address) to the input file; piping: result file from other tool; text: input content</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;seq_format&quot;</span> : <span class="st">&quot;fasta&quot;</span>, <span class="co">##String. Sequence format.</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># transcription factor binding motifs matrixes or PSSMs (12 motifs for TFs known to regulate eve)</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;m_string&quot;</span> : <span class="st">&quot;http://rsat-tagc.univ-mrs.fr/rsat/demo_files/Dmelanogaster_segmentation_12matrices.tf&quot;</span>, <span class="co">##Input string specifying the query. The value can be the query content, the URL of a file available on some Web server, the internal path of the result file returned by another tool of this RSAT server (piping for workflows).</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;m_string_type&quot;</span> : <span class="st">&quot;url&quot;</span>, <span class="co">##Type of information provided by the input string. Supported values: url: URL (Web address) to the input file; piping: result file from other tool; text: input content</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;matrix_format&quot;</span> : <span class="st">&quot;transfac&quot;</span>, <span class="co">##String. Matrix suffix. This argument is mandatory.</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;n&quot;</span> : <span class="st">&quot;score&quot;</span>, <span class="co">##String. Treatment of N characters. These characters are often used in DNA sequences to represent undefined or masked nucleotides. Supported: skip, score.</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;pseudo&quot;</span> : <span class="dv">1</span>, <span class="co">##Number. Pseudo-count for the matrix (default 1).</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;markov_order&quot;</span> : <span class="dv">1</span>, <span class="co">##Integer. Markov order for background model. Only when bgfile is not specified.</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;bginput&quot;</span> : <span class="va">True</span>, <span class="co">##Boolean. Calculate background model from the input sequence set.</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;bg_pseudo&quot;</span> : <span class="fl">0.01</span>, <span class="co">##Number. Pseudo frequency for the background model. Value must be a real between 0 and 1</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;markov&quot;</span> : <span class="dv">1</span>, <span class="co">##Integer. Order of the markov chain for the background model.</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;origin&quot;</span> : <span class="st">&quot;end&quot;</span>, <span class="co">##String. Specify the origin for the calculation of positions. Supported: start, end, center, chrom</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;offset&quot;</span> : <span class="dv">0</span>, <span class="co">##Integer. Add a given number to site positions (change the reference point).</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;2str&quot;</span> : <span class="va">True</span>, <span class="co">##Boolean. Scan both strands for DNA sequences</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;return&quot;</span> : <span class="st">&quot;sites,pval,limits&quot;</span>, <span class="co">##String. lists of fields to return. Supported fields - sites, p_score, pval, seq_scores, rank, normw, proba_BM, limits,weight_limits, distrib, occ_proba, bg_model,bg_residues, matrix, freq_matrix, weight_matrix,crer</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># weight score. Positive means that the scanned seq is more likely to be an instance of the motif</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;lth_score&quot;</span> : <span class="dv">1</span>, <span class="co">##Number. Lower threshold on some parameters.</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># upper threshold p-value. Correction of weight scores</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;uth_pval&quot;</span> : <span class="fl">0.0001</span>, <span class="co">##Number. Upper threshold on some parameters.</span></span></code></pre></div>
<p>**Make sure to keep the indentation the same!</p>
<ol start="4" style="list-style-type: decimal">
<li><p>Open the terminal (<code>CTRL + ALT + T</code> in ubuntu). And go
to the directory where you stored the file (for example:
<code>cd ~/</code>).</p></li>
<li><p>Either run the file <code>python3 test_matrix-scan.py</code> or
copy paste the script in the python CLI.</p></li>
<li><p>You can add the following lines to store your results in a html
document:</p></li>
</ol>
<div class="sourceCode" id="cb32"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>completeName <span class="op">=</span> <span class="st">&quot;edit-here-for-name-of-file&quot;</span> <span class="op">+</span> <span class="st">&quot;.html&quot;</span> <span class="co"># edit this line</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># writes output file</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="bu">open</span>(completeName, <span class="st">&quot;w+&quot;</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>f.write(r.text)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>f.close()</span></code></pre></div>
</div>
<div id="web" class="section level4" number="8.3.2.2">
<h4><span class="header-section-number">8.3.2.2</span>
<strong>Web</strong></h4>
<p>Using the same example shown for the scripts version (matrix-scan
DEMO 1), we will exemplify now how to use the web version of REST.</p>
<ol style="list-style-type: decimal">
<li><p>Go to <a href="http://rsat-tagc.univ-mrs.fr/rest/">REST</a>. Here
will appear all the RSAT programs available through REST at the moment,
along with a description of what each of them do. Search the program
<code>matrix-scan</code> and click on it.</p></li>
<li><p>Click on the <code>GET</code> button &gt; then
<code>Try it out</code>. A list of all the program’s parameters with a
short description will appear as well as a field to introduce their
value.</p></li>
</ol>
<p><img src="images/REST_matrix-scan_empty-opts.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Fill all mandatory and chosen optional parameters value. We will
fill it in as we did in the scripts version.</p>
<ul>
<li><code>i_string</code> :
<code>http://rsat-tagc.univ-mrs.fr/rsat/demo_files/Dmelanogaster_eve_up5000.fasta</code></li>
<li><code>i_string_type</code> : <code>url</code></li>
<li><code>seq_format</code> : <code>fasta</code></li>
<li><code>m_string</code> :
<code>http://rsat-tagc.univ-mrs.fr/rsat/demo_files/Dmelanogaster_segmentation_12matrices.tf</code></li>
<li><code>m_string_type</code> : <code>url</code></li>
<li><code>matrix_format</code> : <code>transfac</code></li>
<li><code>n</code> : <code>score</code></li>
<li><code>pseudo</code> : 1</li>
<li><code>markov_order</code> : 1</li>
<li><code>bginput</code> : True</li>
<li><code>bg_pseudo</code> : 0.01</li>
<li><code>markov</code> : 1</li>
<li><code>origin</code> : <code>end</code></li>
<li><code>offset</code> : 0</li>
<li><code>2str</code> : True</li>
<li><code>return</code> : <code>sites,pval,limits</code></li>
<li><code>lth_score</code> : 1</li>
<li><code>uth_pval</code> : 0.0001</li>
</ul></li>
</ol>
<p><br />
</p>
<ol start="4" style="list-style-type: decimal">
<li>Click on the <code>Execute</code> button. After a ~min a result like
this should appear. You may see your results through the <strong>Request
URL</strong> or in the <strong>Response body</strong>.</li>
</ol>
<p><img src="images/REST_matrix-scan_demo1-result.png" /></p>
<!-- **************************************************************** -->
<!-- # Supplementary information -->
<!-- ## Files -->
<!-- Stand-alone version + web servers for RSAT -->
<!-- `rsat_YYYY.MM.DD.tar.gz` -->
<!-- Metabolic pathway analysis tools (previously supported on the NeAT server, not maintained anymore). -->
<!-- `metabolic-tools_YYYYMMDD.tar.gz` -->
<!-- ## RSAT installation and user guides -->
<!-- After having uncompressed the archive, you will find the installation and user guides in the `doc/manuals` directory -->
<!-- ```{bash} -->
<!-- ls -1 public_html/release/*.pdf -->
<!-- ``` -->
<!-- | Guide | File | -->
<!-- |------------------------|---------------------------| -->
<!-- | RSAT installation guide |   RSAT_install_guide.pdf | -->
<!-- | RSAT Web configuration guide |   rsat_web_server.pdf | -->
<!-- | RSAT Command-linde user guide |  tutorial_shell_rsat.pdf | -->
<!-- | NeAT Web server configuration |  neat_web_server.pdf | -->
<!-- | NeAT Command-line user guide |   neat_tutorial.pdf | -->
<!-- **************************************************************** -->
<!-- Define an environment variable specifying the path of RSAT directory -->
<!-- ```{bash} -->
<!-- ## Go th the main RSAT directory -->
<!-- cd ${RSAT} -->
<!-- ## Parameters to change -->
<!-- ##   rsat_site   rsat-vm-2016-03 -->
<!-- ##   rsat_server_admin    I don't specify it, because I don't want to receive notifications from all the VMs -->
<!-- ## I activate the optional tools ucsc_tools and ensembl_tools, but not the other ones because they require many genomes (phylo tools) or big genomes (compara_tools, variation_tools). -->
<!-- ## Load the (updated) RSAT environment variables -->
<!-- cd ${RSAT}; source RSAT_config.bashrc -->
<!-- ## Check that the RSAT environment variable has been properly -->
<!-- ## configured. Note: I also define it in the beginning of the script -->
<!-- ## because I will beed it for the different installation chunks. -->
<!-- echo "RSAT path: ${RSAT}" -->
<!-- cd ${RSAT} -->
<!-- ## Initialise RSAT folders -->
<!-- make -f makefiles/init_rsat.mk init -->
<!-- ################################################################ -->
<!-- ## Next steps require to be done as rsat administrator user -->
<!-- ## compile RSAT programs written in C -->
<!-- cd ${RSAT} -->
<!-- make -f makefiles/init_rsat.mk compile_all -->
<!-- df -m > ${RSAT}/install_logs/df_$(date +%Y-%m-%d_%H-%M-%S)_rsat_app_compiled.txt -->
<!-- ## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- ## !!!!!!!!!!!!!!!!!!!!!!!!!!!  BUG    !!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- ## !!!! I HAVE A PROBLEM TO COMPILE KWALKS. SHOULD BE CHECKED !!!!! -->
<!-- ## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- ################################################################ -->
<!-- ## Install some third-party programs required by some RSAT scripts. -->
<!-- cd ${RSAT} -->
<!-- make -f makefiles/install_software.mk list_ext_apps -->
<!-- make -f makefiles/install_software.mk install_ext_apps -->
<!-- df -m > ${RSAT}/install_logs/df_$(date +%Y-%m-%d_%H-%M-%S)_rsat_extapp_installed.txt -->
<!-- ``` -->
<!-- # Dependencies -->
<!-- ## mkvtree and vmatch -->
<!-- The RSAT program `purge-sequences` is used to mask redundant sequences, which is strongly recommended before running motif discovery, since the over-representation statistics rely on the hypothesis of independence.  -->
<!-- This perl script relies on the tools `mkvtree` and `vmatch` developed by Stefan Kurtz.  -->
<!-- ```{bash eval=FALSE} -->
<!-- cd ${RSAT} -->
<!-- ## List dependencies for external applications -->
<!-- make -f makefiles/install_software.mk list_ext_apps -->
<!-- ## Install -->
<!-- make -f makefiles/install_software.mk install_vmatch -->
<!-- ``` -->
</div>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
